import{d as S,u as L,s as B,r as p,e as z,w as g,o as c,c as f,f as h,g as u,B as k,h as w,i as U,R as O,P as I,j as $,b as e,n as d,k as C,F as T,l as j,t as v,p as N,a as E,_ as F,m as q,q as W}from"./index-a9d61e94.js";const y=r=>(N("data-v-eb01de77"),r=r(),E(),r),A={class:"users-list"},G={class:"users-table"},H={class:"users-table__header"},J=y(()=>e("th",{class:"users-table__column users-table__column_order"}," № ",-1)),K=y(()=>e("th",{class:"users-table__column users-table__column_id"},"ID",-1)),Q={class:"users-table__column users-table__column_first-name"},X={class:"users-table__column users-table__column_second-name"},Y={class:"users-table__column users-table__column_e-mail"},Z=y(()=>e("th",null,null,-1)),ee=y(()=>e("th",null,null,-1)),se={class:"users-table__column users-table__column_order"},te={class:"users-table__column users-table__column_id"},ae={class:"users-table__column users-table__column_first-name"},le={class:"users-table__column users-table__column_second-name"},oe={class:"users-table__column users-table__column_e-mail"},ne={class:"users-table__column users-table__column_button"},re={class:"users-table__column users-table__column_button"},_e=S({__name:"UsersList",setup(r){const b=L(),{users:i}=B(b),_=p(!1),l=p(""),o=p(""),n=p(""),x=z(()=>{let t=null,s="";return l.value?(t="first_name",s=l.value):o.value?(t="second_name",s=o.value):n.value&&(t="e_mail",s=n.value),t?P(t,s):i.value}),P=(t,s)=>s==="up"?[...i.value].sort((a,m)=>a[t].localeCompare(m[t])):[...i.value].sort((a,m)=>m[t].localeCompare(a[t]));g(l,t=>{t&&(o.value="",n.value="")}),g(o,t=>{t&&(l.value="",n.value="")}),g(n,t=>{t&&(l.value="",o.value="")});const M=()=>{_.value=!0},R=t=>{console.log("user: ",t)},V=t=>{console.log("id: ",t)};return(t,s)=>(c(),f("div",A,[h(k,{text:"Create User",onClick:u(M,["prevent"]),class:"users-list__create-button"},null,8,["onClick"]),_.value?(c(),w(I,{key:0,onClosePopup:s[1]||(s[1]=a=>_.value=!1)},{default:U(()=>[h(O,{onIsRegistered:s[0]||(s[0]=a=>_.value=!1)})]),_:1})):$("",!0),e("table",G,[e("thead",null,[e("tr",H,[J,K,e("th",Q,[e("button",{class:d(["users-table__arrow",{"users-table__arrow_active":l.value==="up"}]),type:"button",onClick:s[2]||(s[2]=u(a=>l.value="up",["prevent"]))}," ▲ ",2),e("button",{class:d(["users-table__arrow",{"users-table__arrow_active":l.value==="down"}]),type:"button",onClick:s[3]||(s[3]=u(a=>l.value="down",["prevent"]))}," ▼ ",2),C(" First Name ")]),e("th",X,[e("button",{class:d(["users-table__arrow",{"users-table__arrow_active":o.value==="up"}]),type:"button",onClick:s[4]||(s[4]=u(a=>o.value="up",["prevent"]))}," ▲ ",2),e("button",{class:d(["users-table__arrow",{"users-table__arrow_active":o.value==="down"}]),type:"button",onClick:s[5]||(s[5]=u(a=>o.value="down",["prevent"]))}," ▼ ",2),C(" Second Name ")]),e("th",Y,[e("button",{class:d(["users-table__arrow",{"users-table__arrow_active":n.value==="up"}]),type:"button",onClick:s[6]||(s[6]=u(a=>n.value="up",["prevent"]))}," ▲ ",2),e("button",{class:d(["users-table__arrow",{"users-table__arrow_active":n.value==="down"}]),type:"button",onClick:s[7]||(s[7]=u(a=>n.value="down",["prevent"]))}," ▼ ",2),C(" E-mail ")]),Z,ee])]),e("tbody",null,[(c(!0),f(T,null,j(x.value,(a,m)=>(c(),f("tr",{key:a.id,class:"users-table__row"},[e("td",se,v(m+1),1),e("td",te,v(a.id),1),e("td",ae,v(a.first_name),1),e("td",le,v(a.second_name),1),e("td",oe,v(a.e_mail),1),e("td",ne,[h(k,{text:"Edit",onClick:u(D=>R(a),["prevent"]),class:"users-table__button"},null,8,["onClick"])]),e("td",re,[h(k,{text:"Delete",onClick:u(D=>V(a.id),["prevent"]),class:"users-table__button"},null,8,["onClick"])])]))),128))])])]))}});const ue=F(_e,[["__scopeId","data-v-eb01de77"]]);const ce={},ie=r=>(N("data-v-997c1a58"),r=r(),E(),r),de={class:"loader"},ve=ie(()=>e("div",{class:"loader__spinner"},null,-1)),pe=[ve];function be(r,b){return c(),f("div",de,pe)}const me=F(ce,[["render",be],["__scopeId","data-v-997c1a58"]]),fe={class:"users-list-page"},he={class:"users-list-page__error-container"},we=e("span",{class:"users-list-page__error-sign"},"✖",-1),ye={class:"users-list-page__error-text"},ke=S({__name:"UsersListPage",setup(r){const b=L(),{users:i}=B(b),_=p(!1),l=p(null);return q(async()=>{if(!i.value.length)try{_.value=!0,await b.initializeUsers(),l.value=null}catch(o){o instanceof Error?l.value=o.message:l.value="Error: loading users data"}finally{_.value=!1}}),(o,n)=>(c(),f("div",fe,[_.value?(c(),w(me,{key:0})):l.value?(c(),w(I,{key:1,onClosePopup:n[0]||(n[0]=x=>l.value=null)},{default:U(()=>[e("div",he,[we,e("p",ye,v(l.value),1)])]),_:1})):$("",!0),!_.value&&W(i).length?(c(),w(ue,{key:2})):$("",!0)]))}});export{ke as default};
