import{d as I,u as B,s as N,r as v,b as A,w as g,o as c,c as f,e as h,f as u,U as $,g as w,h as P,R as D,P as E,i as C,a as e,n as d,j as k,F as O,k as T,t as m,p as x,l as U,_ as L,m as j,q}from"./index-56dc991d.js";const y=l=>(x("data-v-bce511dd"),l=l(),U(),l),W={class:"user-list"},G={class:"users-table"},H={class:"users-table__header"},J=y(()=>e("th",{class:"users-table__column users-table__column_id"},"№",-1)),K={class:"users-table__column users-table__column_first-name"},Q=y(()=>e("span",null,null,-1)),X={class:"users-table__column users-table__column_second-name"},Y={class:"users-table__column users-table__column_e-mail"},Z=y(()=>e("th",null,null,-1)),ee=y(()=>e("th",null,null,-1)),se={class:"users-table__column users-table__column_id"},te={class:"users-table__column users-table__column_first-name"},ae={class:"users-table__column users-table__column_second-name"},oe={class:"users-table__column users-table__column_e-mail"},le={class:"users-table__column users-table__column_button"},ne={class:"users-table__column users-table__column_button"},re=I({__name:"UsersList",setup(l){const p=B(),{users:i}=N(p),_=v(!1),o=v(""),n=v(""),r=v(""),S=A(()=>{let t=null,s="";return o.value?(t="first_name",s=o.value):n.value?(t="second_name",s=n.value):r.value&&(t="e_mail",s=r.value),t?F(t,s):i.value}),F=(t,s)=>s==="up"?[...i.value].sort((a,b)=>a[t].localeCompare(b[t])):[...i.value].sort((a,b)=>b[t].localeCompare(a[t]));g(o,t=>{t&&(n.value="",r.value="")}),g(n,t=>{t&&(o.value="",r.value="")}),g(r,t=>{t&&(o.value="",n.value="")});const M=()=>{_.value=!0},R=t=>{console.log("user: ",t)},V=t=>{console.log("id: ",t)};return(t,s)=>(c(),f("div",W,[h($,{text:"Create User",onClick:u(M,["prevent"]),class:"users-list__create-button"},null,8,["onClick"]),_.value?(c(),w(E,{key:0,onClosePopup:s[1]||(s[1]=a=>_.value=!1)},{default:P(()=>[h(D,{onIsRegistered:s[0]||(s[0]=a=>_.value=!1)})]),_:1})):C("",!0),e("table",G,[e("thead",null,[e("tr",H,[J,e("th",K,[Q,e("button",{class:d(["users-table__arrow",{"users-table__arrow_active":o.value==="up"}]),type:"button",onClick:s[2]||(s[2]=u(a=>o.value="up",["prevent"]))}," ▲ ",2),e("button",{class:d(["users-table__arrow",{"users-table__arrow_active":o.value==="down"}]),type:"button",onClick:s[3]||(s[3]=u(a=>o.value="down",["prevent"]))}," ▼ ",2),k(" First Name ")]),e("th",X,[e("button",{class:d(["users-table__arrow",{"users-table__arrow_active":n.value==="up"}]),type:"button",onClick:s[4]||(s[4]=u(a=>n.value="up",["prevent"]))}," ▲ ",2),e("button",{class:d(["users-table__arrow",{"users-table__arrow_active":n.value==="down"}]),type:"button",onClick:s[5]||(s[5]=u(a=>n.value="down",["prevent"]))}," ▼ ",2),k(" Second Name ")]),e("th",Y,[e("button",{class:d(["users-table__arrow",{"users-table__arrow_active":r.value==="up"}]),type:"button",onClick:s[6]||(s[6]=u(a=>r.value="up",["prevent"]))}," ▲ ",2),e("button",{class:d(["users-table__arrow",{"users-table__arrow_active":r.value==="down"}]),type:"button",onClick:s[7]||(s[7]=u(a=>r.value="down",["prevent"]))}," ▼ ",2),k(" E-mail ")]),Z,ee])]),e("tbody",null,[(c(!0),f(O,null,T(S.value,(a,b)=>(c(),f("tr",{key:a.id,class:"users-table__row"},[e("td",se,m(b+1),1),e("td",te,m(a.first_name),1),e("td",ae,m(a.second_name),1),e("td",oe,m(a.e_mail),1),e("td",le,[h($,{text:"Edit",onClick:u(z=>R(a),["prevent"]),class:"users-table__button"},null,8,["onClick"])]),e("td",ne,[h($,{text:"Delete",onClick:u(z=>V(a.id),["prevent"]),class:"users-table__button"},null,8,["onClick"])])]))),128))])])]))}});const _e=L(re,[["__scopeId","data-v-bce511dd"]]);const ue={},ce=l=>(x("data-v-a9595993"),l=l(),U(),l),ie={class:"loader"},de=ce(()=>e("div",{class:"loader__spinner"},null,-1)),ve=[de];function pe(l,p){return c(),f("div",ie,ve)}const be=L(ue,[["render",pe],["__scopeId","data-v-a9595993"]]),me=l=>(x("data-v-90f310ab"),l=l(),U(),l),fe={class:"users-list-page"},he={class:"users-list-page__error-container"},we=me(()=>e("span",{class:"users-list-page__error-sign"}," ✖ ",-1)),ye={class:"users-list-page__error-text"},ge=I({__name:"UsersListPage",setup(l){const p=B(),{users:i}=N(p),_=v(!1),o=v(null);return j(async()=>{if(!i.value.length)try{_.value=!0,await p.initializeUsers(),o.value=null}catch(n){n instanceof Error?o.value=n.message:o.value="Error: loading users data"}finally{_.value=!1}}),(n,r)=>(c(),f("div",fe,[_.value?(c(),w(be,{key:0})):o.value?(c(),w(E,{key:1,onClosePopup:r[0]||(r[0]=S=>o.value=null)},{default:P(()=>[e("div",he,[we,e("p",ye,m(o.value),1)])]),_:1})):C("",!0),!_.value&&q(i).length?(c(),w(_e,{key:2})):C("",!0)]))}});const ke=L(ge,[["__scopeId","data-v-90f310ab"]]);export{ke as default};
