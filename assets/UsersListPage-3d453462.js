import{d as C,o as i,c as h,t as p,n as D,_ as x,u as B,s as L,r as f,e as V,w,f as r,g as c,B as $,h as g,i as I,R as z,P as U,j as k,b as e,F as O,k as j,p as N,a as E,l as q,m as T}from"./index-b693cc28.js";const W=C({__name:"Arrow",props:{direction:{type:String,required:!0},isActive:{type:Boolean,default:!1}},setup(n){const d=n;return(v,u)=>(i(),h("button",{class:D(["arrow",{arrow_active:d.isActive}]),type:"button"},p(n.direction==="up"?"▲":"▼"),3))}});const b=x(W,[["__scopeId","data-v-06d1649a"]]),m=n=>(N("data-v-0275135f"),n=n(),E(),n),G={class:"users-list"},H={class:"users-table"},J={class:"users-table__header"},K=m(()=>e("th",{class:"users-table__column users-table__column_order"}," № ",-1)),Q=m(()=>e("th",{class:"users-table__column users-table__column_id users-table__column_mobile-hidden"}," ID ",-1)),X={class:"users-table__column users-table__column_first-name"},Y=m(()=>e("span",null,"First Name",-1)),Z={class:"users-table__column users-table__column_second-name"},ee=m(()=>e("span",null,"Second Name",-1)),se={class:"users-table__column users-table__column_e-mail users-table__column_mobile-hidden"},te=m(()=>e("span",null,"E-mail",-1)),le=m(()=>e("th",{class:"users-table__column_mobile-hidden"},null,-1)),oe=m(()=>e("th",{class:"users-table__column_mobile-hidden"},null,-1)),ne={class:"users-table__column users-table__column_order"},ae={class:"users-table__column users-table__column_id users-table__column_mobile-hidden"},_e={class:"users-table__column users-table__column_first-name"},ue={class:"users-table__column users-table__column_second-name"},re={class:"users-table__column users-table__column_e-mail users-table__column_mobile-hidden"},ie={class:"users-table__column users-table__column_button users-table__column_mobile-hidden"},ce={class:"users-table__column users-table__column_button users-table__column_mobile-hidden"},de=C({__name:"UsersList",setup(n){const d=B(),{users:v}=L(d),u=f(!1),o=f(""),a=f(""),_=f(""),S=V(()=>{let t=null,s="";return o.value?(t="first_name",s=o.value):a.value?(t="second_name",s=a.value):_.value&&(t="e_mail",s=_.value),t?F(t,s):v.value}),F=(t,s)=>s==="up"?[...v.value].sort((l,y)=>l[t].localeCompare(y[t])):[...v.value].sort((l,y)=>y[t].localeCompare(l[t]));w(o,t=>{t&&(a.value="",_.value="")}),w(a,t=>{t&&(o.value="",_.value="")}),w(_,t=>{t&&(o.value="",a.value="")});const P=()=>{u.value=!0},A=t=>{console.log("user: ",t)},M=t=>{console.log("id: ",t)};return(t,s)=>(i(),h("div",G,[r($,{text:"Create User",type:"button",onClick:c(P,["prevent"]),class:"users-list__create-button"},null,8,["onClick"]),u.value?(i(),g(U,{key:0,onClosePopup:s[1]||(s[1]=l=>u.value=!1)},{default:I(()=>[r(z,{onIsRegistered:s[0]||(s[0]=l=>u.value=!1)})]),_:1})):k("",!0),e("table",H,[e("thead",null,[e("tr",J,[K,Q,e("th",X,[r(b,{direction:"up","is-active":o.value==="up",onClick:s[2]||(s[2]=c(l=>o.value="up",["prevent"]))},null,8,["is-active"]),r(b,{direction:"down","is-active":o.value==="down",onClick:s[3]||(s[3]=c(l=>o.value="down",["prevent"]))},null,8,["is-active"]),Y]),e("th",Z,[r(b,{direction:"up","is-active":a.value==="up",onClick:s[4]||(s[4]=c(l=>a.value="up",["prevent"]))},null,8,["is-active"]),r(b,{direction:"down","is-active":a.value==="down",onClick:s[5]||(s[5]=c(l=>a.value="down",["prevent"]))},null,8,["is-active"]),ee]),e("th",se,[r(b,{direction:"up","is-active":_.value==="up",onClick:s[6]||(s[6]=c(l=>_.value="up",["prevent"]))},null,8,["is-active"]),r(b,{direction:"down","is-active":_.value==="down",onClick:s[7]||(s[7]=c(l=>_.value="down",["prevent"]))},null,8,["is-active"]),te]),le,oe])]),e("tbody",null,[(i(!0),h(O,null,j(S.value,(l,y)=>(i(),h("tr",{key:l.id,class:"users-table__row"},[e("td",ne,p(y+1),1),e("td",ae,p(l.id),1),e("td",_e,p(l.first_name),1),e("td",ue,p(l.second_name),1),e("td",re,p(l.e_mail),1),e("td",ie,[r($,{text:"Edit",type:"button",onClick:c(R=>A(l),["prevent"]),class:"users-table__button"},null,8,["onClick"])]),e("td",ce,[r($,{text:"Delete",type:"button",onClick:c(R=>M(l.id),["prevent"]),class:"users-table__button"},null,8,["onClick"])])]))),128))])])]))}});const ve=x(de,[["__scopeId","data-v-0275135f"]]);const pe={},me=n=>(N("data-v-997c1a58"),n=n(),E(),n),be={class:"loader"},fe=me(()=>e("div",{class:"loader__spinner"},null,-1)),he=[fe];function ye(n,d){return i(),h("div",be,he)}const ge=x(pe,[["render",ye],["__scopeId","data-v-997c1a58"]]),we={class:"users-list-page"},$e={class:"users-list-page__error-container"},ke=e("span",{class:"users-list-page__error-sign"},"✖",-1),Ce={class:"users-list-page__error-text"},Se=C({__name:"UsersListPage",setup(n){const d=B(),{users:v}=L(d),u=f(!1),o=f(null);return q(async()=>{if(!v.value.length)try{u.value=!0,await d.initializeUsers(),o.value=null}catch(a){a instanceof Error?o.value=a.message:o.value="Error: loading users data"}finally{u.value=!1}}),(a,_)=>(i(),h("div",we,[u.value?(i(),g(ge,{key:0})):o.value?(i(),g(U,{key:1,onClosePopup:_[0]||(_[0]=S=>o.value=null)},{default:I(()=>[e("div",$e,[ke,e("p",Ce,p(o.value),1)])]),_:1})):k("",!0),!u.value&&T(v).length?(i(),g(ve,{key:2})):k("",!0)]))}});export{Se as default};
